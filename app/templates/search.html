<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta http-equiv="X-UA-Compatible" content="Chrome=1,IE=Edge;IE=11;IE=10;IE=9"/>
    <title>GreenBelt Bonus System</title>
</head>
<link rel="stylesheet" href="static/bootstrap.min.css">
<link rel="stylesheet" href="static/jquery-ui.css">
<script src="static/jquery.min.js"></script>
<script src="static/jquery-ui.min.js"></script>
<script src="static/bootstrap.min.js"></script>
<script src="static/poshytip/jquery.poshytip.min.js"></script>
<link rel="stylesheet" href="static/poshytip/tip-twitter/tip-twitter.css">

<style type="text/css">
    table tr:hover {background-color: #0180FE;color: #fff;cursor:hand;}
    th {text-align: center;background: #27AE60;color: white;vertical-align: middle!important;}
    td {text-align: center}
    caption {text-align: center;font-size: 18px}
    p {font-family:"Microsoft YaHei",微软雅黑,"MicrosoftJhengHei",华文细黑,STHeiti,MingLiu}
    a:link{color: black;}
    a:hover{color: white;text-decoration:none;}
</style>

<body leftmargin=0 topmargin=0 oncontextmenu='return false' ondragstart='return false' onselectstart ='return false' onselect='document.selection.empty()' oncopy='document.selection.empty()' onbeforecopy='return false' onmouseup='document.selection.empty()'>
<div class="site-notice" style="padding: 5px 0 ;text-align: center;background: #208d4e" >
    <marquee behavior="" direction="" style="color: linen;font-size: 16px">Welcome User From {{ request.remote_addr }}</marquee>
</div>

<header class="site-header jumbotron" style="background:#27AE60">
    <div class="container-fluid">
        <div style="text-align: center;font-size: 46px;color:white;font-family: 'Monotype Corsiva', 'Apple Chancery', 'URW Chancery L', cursive">
            Hallo,
            <br>
            Welcome to GreenBelt Bonus Search Page
        </div>

    <div class="form-group" style="color: #dff0d8;font-size: 20px">
        <form action="" method="post" class="col-xs-12">
        <input type="hidden" name="_crsf_token" value="{{ crsf_token() }}">
        <div class="row col-md-6 col-md-offset-3">
            <div class="input-group">
            <input id="s" type="text" name="employee_name" placeholder="Enter Employee Name Or Id" class="form-control search clearable">
            <span class="input-group-btn">
                <button class="btn btn-default" type="submit" name="submit">Submit</button>
            </span>
            </div>
        </div>
        </form>
    </div>

    </div>
</header>

<!--generate summary report -->
{% if request.form.get('employee_name') %}
    {% if data2 %}
    <div class="container">
    <div class="alert alert-success" style="font-size: 16px">
    <b>Hello <span style="color: #eea236">{{ request.form.get('employee_name') }}</span>:</b>
    <br>
    <p>Thank you for your participation!</p>
    <p>感谢您的参与!</p>
    <br>
    <div class="table-responsive">
        <table border="1">
            <tr>
                <td><p>CIS Total Score <br>员工项目总积分</p></td>
                <td><p>Active Score <br>可用积分</p></td>
                <td><p>Inactive Score <br>暂不可用积分</p></td>
                <td><p>Frozon Scorebr <br>冻结积分</p></td>
            </tr>
            <tr>
                <td>{{ data2.get('a') }}</td>
                <td>{{ data2.get('b') }}</td>
                <td>{{ data2.get('c') }}</td>
                <td>{{ data2.get('d') }}</td>
            </tr>
        </table>
    </div>
    </div>
    </div>
    {% endif %}
{% endif %}

<!--表格生成-->
{% if data %}
     <div class="table-responsive">
         <table class="table" id="score_matrix">
         <caption>{{ request.form.get('employee_name') }}'s Project Detail</caption>
             <tr>
             <th rowspan="2">Project No.</th>
             <th colspan="3">Project General Situation</th>
             <th colspan="2">Releasing Status</th>
             <th colspan="3">Timely Releasing Score</th>
             </tr>
             <tr>
                 <th>Project Type</th>
                 <th>Project CIS Score</th>
                 <th>Staff Score</th>
                 <th>Already Released</th>
                 <th>Not Release Yet</th>
                 <th>Project Closed</th>
                 <th>Tracked 3 Month</th>
                 <th>Tracked 6 Month</th>
             </tr>
             {% for element in data %}
                 <tr>
                 {% for e in element %}
                     <td><a href="javascript:" class="ahover" title="test &#31; test{{ element }}{{ e }}">{{ e }}</a></td>
                 {% endfor %}
                 </tr>
             {% endfor %}
         </table>
     </div>
{% endif %}

<footer class="footer">
    <div class="container-fluid">
        <p style="font-size: 9px;color: #adadad">ALL RIGHTS RESERVED &copy; 2016 SHELDON CHEN</p>
    </div>
</footer>

<script>
    var $SCRIPT_ROOT = {{ request.script_root|tojson|safe }}

    $(function() {
        function termPop(term) {
            return term.pop();
        }

    $("input#s").autocomplete({
        source: function (request, response) {
            //the GET method! use flask request.agrs.get('term')
            $.getJSON($SCRIPT_ROOT + "/api/user/",{term:request.term},response);
        }
    })
});

$(".ahover").poshytip({
    className: 'tip-twitter',
	showTimeout: 1,
	alignTo: 'target',
	alignX: 'center',
	offsetY: 5,
	allowTipHover: false,
	fade: false,
	slide: false
});
</script>
</body>
</html>