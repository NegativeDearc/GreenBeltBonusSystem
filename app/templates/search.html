<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta http-equiv="X-UA-Compatible" content="Chrome=1,IE=Edge;IE=11;IE=10;IE=9"/>
    <title>GreenBelt Bonus System</title>
</head>
<link rel="stylesheet" href="static/bootstrap.min.css">
<link rel="stylesheet" href="static/jquery-ui.css">
<script src="static/jquery.min.js"></script>
<script src="static/jquery-ui.min.js"></script>
<script src="static/bootstrap.min.js"></script>

<body>

<div class="site-notice" style="padding: 5px 0 ;text-align: center;background: #208d4e" >
    <marquee behavior="" direction="" style="color: linen;font-size: 16px">Welcome User From {{ request.remote_addr }}</marquee>
</div>

<header class="site-header jumbotron" style="background:#27AE60">
    <div class="container-fluid">
        <div style="text-align: center;font-size: 46px;color:white;font-family: 'Monotype Corsiva', 'Apple Chancery', 'URW Chancery L', cursive">
            Hallo,
            <br>
            Welcome to GreenBelt Bonus Search Page
        </div>

    <div class="form-group" style="color: #dff0d8;font-size: 20px">
        <form action="" method="post" class="col-xs-12">
        <input type="hidden" name="_crsf_token" value="{{ crsf_token() }}">
        <div class="row col-md-6 col-md-offset-3">
            <div class="input-group">
            <input id="s" type="text" name="employee_name" placeholder="Enter Employee Name Or Id" class="form-control search clearable">
            <span class="input-group-btn">
                <button class="btn btn-default" type="submit" name="submit">Submit</button>
            </span>
            </div>
        </div>
        </form>
    </div>

    </div>
</header>

<!--generate summary report -->
{% if request.form.get('employee_name') %}
<!--if data -->
    {% if data2 %}
    <div class="container">
    <div class="alert alert-success" style="font-size: 16px">
    <b>Hello <span style="color: #eea236">{{ request.form.get('employee_name') }}</span>:</b>
    <p>As a period,<span style="color: red">{{ data2.get('d0') }}</span> projects total,
       you're finished <span style="color: red">{{ data2.get('d1')}}</span> projects,
       in 3 month progress <span style="color: red">{{ data2.get('d2') }}</span>,
       in 6 month progress <span style="color: red">{{ data2.get('d3') }}</span>,
       failed <span style="color: red">{{ data2.get('d4') }}</span> projects
    </p>
    <ol>
        <li>Being a inintialor,<span style="color: red">{{ data2.get('d5') }}</span> projects,earns <span style="color: red">{{ data1.get('Initiator') }}</span> bonus</li>
        <li>Being a leader,<span style="color: red">{{ data2.get('d7') }}</span> projects,earns <span style="color: red">{{ data1.get('Leader') }}</span> bonus</li>
        <li>Being a major member,<span style="color: red">{{ data2.get('d9') }}</span> projects,earns <span style="color: red">{{ data1.get('Major') }}</span> bonus</li>
        <li>Being a minor member,<span style="color: red">{{ data2.get('d6') }}</span> projects,earns <span style="color: red">{{ data1.get('Minor') }}</span> bonus</li>
    </ol>
    <p>Total: {{ data2.get('13') }} Bonus,among them you can use <span style="color: red">{{ data1.get('sum') }}</span>! And {{ data2.get('15') }} is waiting for you!</p>
    <p>Thank you for your participation!</p>
    </div>
    </div>
    {% endif %}
{% endif %}

<!--generate table -->
     {% if data %}
     <div class="container-fluid">
     <div class="table-responsive">
     <table class="table table-hover table-striped">
        <caption style="text-align: center;font-size: 20px">Information of {{ request.form.get('employee_name') }}</caption>
        <tr style="background-color:lightgreen">
            <td align="center">PROJECT</td>
            <td align="center">PROJECT NAME</td>
            <td align="center">PROJECT_DUE_TIME</td>
            <td align="center">INITIATOR</td>
            <td align="center">LEADER</td>
            <td align="center">MAJOR_MEMBER</td>
            <td align="center">MINOR_MEMBER</td>
            <td align="center">ACTIVE_SCORE</td>
        </tr>

        {% for rows in data %}
            <tr>
            {% for element in rows %}
                <td align="center">{{ element }}</td>
            {% endfor %}
            </tr>
        {% endfor %}
    </table>

    </div>
    </div>
    {% endif %}

     {% if total %}
     <div style="text-align: left;font-size: 20px;color:darkmagenta;font-style: italic">
         {{ request.form.get('employee_name') }}'s total Bonus is {{ total }}
     </div>
     </div>
    {% endif %}

<nav class="navbar-fixed-bottom">
    <div class="container-fluid">
        <p style="font-size: 9px;color: #adadad">ALL RIGHTS RESERVED &copy; 2016 SHELDON CHEN</p>
    </div>
</nav>

<script>
    var $SCRIPT_ROOT = {{ request.script_root|tojson|safe }}

    $(function() {
        function termPop(term) {
            return term.pop();
        }

    $("input#s").autocomplete({
        source: function (request, response) {
            //the GET method! use flask request.agrs.get('term')
            $.getJSON($SCRIPT_ROOT + "/api/user/",{term:request.term},response);
        }
    })
});
</script>
</body>
</html>